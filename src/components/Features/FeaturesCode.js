const FeaturesCode = {};
export default FeaturesCode;

export function initFeaturesCode(val) {

    /*------Scolarite-------*/
    FeaturesCode["SCOLARITE"] = val;
     
    FeaturesCode["SCOLARITE_A"]  = val;
    FeaturesCode["SCOLARITE_A1"] = val;
    FeaturesCode["SCOLARITE_A2"] = val;
    FeaturesCode["SCOLARITE_A3"] = val;
    FeaturesCode["SCOLARITE_A4"] = val;
    FeaturesCode["SCOLARITE_A5"] = val;
    FeaturesCode["SCOLARITE_A6"] = val;

    FeaturesCode["SCOLARITE_B"] =  val;
    FeaturesCode["SCOLARITE_B1"] = val;
    FeaturesCode["SCOLARITE_B2"] = val;
    FeaturesCode["SCOLARITE_B3"] = val;
    FeaturesCode["SCOLARITE_B4"] = val;
    FeaturesCode["SCOLARITE_B5"] = val;

    FeaturesCode["SCOLARITE_C"]  = val;
    FeaturesCode["SCOLARITE_C1"] = val;
    FeaturesCode["SCOLARITE_C2"] = val;
    FeaturesCode["SCOLARITE_C3"] = val;
    FeaturesCode["SCOLARITE_C4"] = val;
    FeaturesCode["SCOLARITE_C5"] = val;
    /*FeaturesCode["SCOLARITE_C6"] = val;
    FeaturesCode["SCOLARITE_C7"] = val;*/

    FeaturesCode["SCOLARITE_D"]  = val;
    FeaturesCode["SCOLARITE_D1"] = val;
    FeaturesCode["SCOLARITE_D2"] = val;
    FeaturesCode["SCOLARITE_D3"] = val;
    FeaturesCode["SCOLARITE_D4"] = val;
    FeaturesCode["SCOLARITE_D5"] = val;

    FeaturesCode["SCOLARITE_E"]  = val;
    FeaturesCode["SCOLARITE_E1"] = val;
    FeaturesCode["SCOLARITE_E2"] = val;
    FeaturesCode["SCOLARITE_E3"] = val;
    //FeaturesCode["SCOLARITE_E4"] = val;


    /*------------Finances-----------*/
    FeaturesCode["FINANCE"]     =  val;

    FeaturesCode["FINANCE_A"]   =  val;
    FeaturesCode["FINANCE_A1"]  =  val;
    FeaturesCode["FINANCE_A2"]  =  val;
    // FeaturesCode["FINANCE_A3"] = val;

    FeaturesCode["FINANCE_B"]   =  val;
    FeaturesCode["FINANCE_B1"]  =  val;
    FeaturesCode["FINANCE_B2"]  =  val;
    FeaturesCode["FINANCE_B3"]  =  val;
    FeaturesCode["FINANCE_B4"]  =  val;

    FeaturesCode["FINANCE_C"]   =  val;
    FeaturesCode["FINANCE_C0"]  =  val;
    FeaturesCode["FINANCE_C2"]  =  val;
    //FeaturesCode["FINANCE_C3"] = val;


     /*------------Stats-------------*/
    FeaturesCode["STATS"]       =  val;

    FeaturesCode["STATS_A"]     =  val;
    FeaturesCode["STATS_A1"]    =  val;
    FeaturesCode["STATS_A2"]    =  val;
    FeaturesCode["STATS_A3"]    =  val;
    FeaturesCode["STATS_A4"]    =  val;
    FeaturesCode["STATS_A5"]    =  val;

    FeaturesCode["STATS_B"]     =  val;
    FeaturesCode["STATS_B1"]    =  val;
    FeaturesCode["STATS_B2"]    =  val;
    FeaturesCode["STATS_B3"]    =  val;
    FeaturesCode["STATS_B4"]    =  val;
    FeaturesCode["STATS_B5"]    =  val;


    /*------Comm avec Parents-------*/
    FeaturesCode["COMM_PARENT"]   = val;

    FeaturesCode["COMM_PARENT_A"] = val;
    FeaturesCode["COMM_PARENT_A1"]= val;
    FeaturesCode["COMM_PARENT_A2"]= val;
    //FeaturesCode["COMM_PARENT_A3"] = val;

    FeaturesCode["COMM_PARENT_B"]  = val;
    FeaturesCode["COMM_PARENT_B1"] = val;
    FeaturesCode["COMM_PARENT_B2"] = val;
    FeaturesCode["COMM_PARENT_B3"] = val;
    FeaturesCode["COMM_PARENT_B4"] = val;
    

    /*----------Impressions--------*/
    FeaturesCode["IMPRESSIONS"]    = val;

    FeaturesCode["IMPRESSIONS_A"]  = val;
    FeaturesCode["IMPRESSIONS_A1"] = val;
    FeaturesCode["IMPRESSIONS_A2"] = val;
    FeaturesCode["IMPRESSIONS_A3"] = val;
    FeaturesCode["IMPRESSIONS_A4"] = val;
    FeaturesCode["IMPRESSIONS_A5"] = val;
    FeaturesCode["IMPRESSIONS_A6"] = val;
    FeaturesCode["IMPRESSIONS_A7"] = val;
    

    FeaturesCode["IMPRESSIONS_B"]  = val;
    FeaturesCode["IMPRESSIONS_B1"] = val;
    FeaturesCode["IMPRESSIONS_B2"] = val;
    FeaturesCode["IMPRESSIONS_B3"] = val;

    
    /*-----------Config------------*/
    FeaturesCode["CONFIG"]         = val;

    FeaturesCode["CONFIG_A"]       = val;
    FeaturesCode["CONFIG_A1"]      = val;
    FeaturesCode["CONFIG_A2"]      = val;
    FeaturesCode["CONFIG_A3"]      = val;
    FeaturesCode["CONFIG_A4"]      = val;
    FeaturesCode["CONFIG_A5"]      = val;
    FeaturesCode["CONFIG_A6"]      = val;

    FeaturesCode["CONFIG_B"]       = val;
    FeaturesCode["CONFIG_B1"]      = val;
    FeaturesCode["CONFIG_B2"]      = val;
    FeaturesCode["CONFIG_B3"]      = val;
    FeaturesCode["CONFIG_B4"]      = val;
    FeaturesCode["CONFIG_B5"]      = val;
    FeaturesCode["CONFIG_B6"]      = val;

    FeaturesCode["CONFIG_C"]       = val;
    FeaturesCode["CONFIG_C1"]      = val;
    FeaturesCode["CONFIG_C2"]      = val;
    FeaturesCode["CONFIG_C3"]      = val;
    FeaturesCode["CONFIG_C4"]      = val;
    FeaturesCode["CONFIG_C5"]      = val;
    FeaturesCode["CONFIG_C6"]      = val;

    FeaturesCode["CONFIG_D"]       = val;
    FeaturesCode["CONFIG_D1"]      = val;
    //FeaturesCode["CONFIG_D2"]      = val;
    //FeaturesCode["CONFIG_D3"]      = val;
    //FeaturesCode["CONFIG_D4"]      = val;
    //FeaturesCode["CONFIG_D5"]      = val;
    //FeaturesCode["CONFIG_D6"]      = val;

    FeaturesCode["CONFIG_E"]       = val;
    FeaturesCode["CONFIG_E1"]      = val;
    FeaturesCode["CONFIG_E2"]      = val;
    FeaturesCode["CONFIG_E3"]      = val;
    FeaturesCode["CONFIG_E4"]      = val;
    FeaturesCode["CONFIG_E5"]      = val;
    FeaturesCode["CONFIG_E6"]      = val;


    /*-----------extras------------*/
    FeaturesCode["EXTRAS"]          = val;

};

export const initAppFeatureTable = (featuresString='') => {
    var featuresStringTable, curPos, currentString;
    var stringLastPos, rootFeatureString, groupRootFeatString;
    var etoilesplitString, rootStringTable;

    if(!featuresString.length == 0) {
        featuresStringTable = featuresString.split('-');
        if (Array.isArray(featuresStringTable) && featuresStringTable.length) {
            
            curPos = 0;
            
            while (curPos < featuresStringTable.length) {
                
                currentString = featuresStringTable[curPos]
                
                if (currentString.includes('*')) {
                    etoilesplitString = currentString.split('*'); 
                    console.log('etoile lon:',etoilesplitString, etoilesplitString.length)
                        
                    for (var key in FeaturesCode) {
                        if(key.includes(etoilesplitString[0])){
                            FeaturesCode[key] ='1';
                        }
                    }
                    

                    if(etoilesplitString[0].includes('_')) {
                        rootStringTable = etoilesplitString[0].split('_');
                        if(FeaturesCode[rootStringTable[0]] == '0') {
                            FeaturesCode[rootStringTable[0]] = 1;
                        }
                    } 
                    
                    curPos = curPos +1;

                } else {
                    
                    FeaturesCode[currentString] = '1';
                    stringLastPos = currentString.length-1;
                    rootFeatureString = currentString.substr(0,stringLastPos-2);
                    groupRootFeatString = currentString.substr(0,stringLastPos);
                    
                    if (FeaturesCode[rootFeatureString] == '0') FeaturesCode[rootFeatureString] ='1';
                    if (FeaturesCode[groupRootFeatString] == '0') FeaturesCode[groupRootFeatString] ='1';
                    curPos = curPos +1;
                }
            
            }
            
        }

    }
        
}
        
   


